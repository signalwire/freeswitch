#!/bin/sh

if [ -f tests/sfversion@EXEEXT@ ]; then
	cd tests
	fi

if [ ! -f sfversion@EXEEXT@ ]; then
	echo "Not able to find test executables."
	exit 1
	fi

sfversion=`./sfversion@EXEEXT@`

# Force exit on errors.
set -e

# generic-tests
uname -a
./error_test@EXEEXT@
./pcm_test@EXEEXT@
./ulaw_test@EXEEXT@
./alaw_test@EXEEXT@
./dwvw_test@EXEEXT@
./command_test@EXEEXT@ ver
./command_test@EXEEXT@ norm
./command_test@EXEEXT@ format
./command_test@EXEEXT@ peak
./command_test@EXEEXT@ trunc
./command_test@EXEEXT@ inst
./command_test@EXEEXT@ current_sf_info
./command_test@EXEEXT@ bext
./command_test@EXEEXT@ bextch
./floating_point_test@EXEEXT@
./checksum_test@EXEEXT@
./scale_clip_test@EXEEXT@
./headerless_test@EXEEXT@
./locale_test@EXEEXT@
./win32_ordinal_test@EXEEXT@
./external_libs_test@EXEEXT@
./cpp_test@EXEEXT@
echo "----------------------------------------------------------------------"
echo "  $sfversion passed common tests."
echo "----------------------------------------------------------------------"

# aiff-tests
./write_read_test@EXEEXT@ aiff
./lossy_comp_test@EXEEXT@ aiff_ulaw
./lossy_comp_test@EXEEXT@ aiff_alaw
./lossy_comp_test@EXEEXT@ aiff_gsm610
echo "=========================="
echo "./lossy_comp_test@EXEEXT@ aiff_ima"
echo "=========================="
./peak_chunk_test@EXEEXT@ aiff
./header_test@EXEEXT@ aiff
./misc_test@EXEEXT@ aiff
./string_test@EXEEXT@ aiff
./multi_file_test@EXEEXT@ aiff
./aiff_rw_test@EXEEXT@
echo "----------------------------------------------------------------------"
echo "  $sfversion passed tests on AIFF files."
echo "----------------------------------------------------------------------"

# au-tests
./write_read_test@EXEEXT@ au
./lossy_comp_test@EXEEXT@ au_ulaw
./lossy_comp_test@EXEEXT@ au_alaw
./lossy_comp_test@EXEEXT@ au_g721
./lossy_comp_test@EXEEXT@ au_g723
./header_test@EXEEXT@ au
./misc_test@EXEEXT@ au
./multi_file_test@EXEEXT@ au
echo "----------------------------------------------------------------------"
echo "  $sfversion passed tests on AU files."
echo "----------------------------------------------------------------------"

# caf-tests
./write_read_test@EXEEXT@ caf
./lossy_comp_test@EXEEXT@ caf_ulaw
./lossy_comp_test@EXEEXT@ caf_alaw
./header_test@EXEEXT@ caf
./misc_test@EXEEXT@ caf
echo "----------------------------------------------------------------------"
echo "  $sfversion passed tests on CAF files."
echo "----------------------------------------------------------------------"

# wav-tests
./write_read_test@EXEEXT@ wav
./lossy_comp_test@EXEEXT@ wav_pcm
./lossy_comp_test@EXEEXT@ wav_ima
./lossy_comp_test@EXEEXT@ wav_msadpcm
./lossy_comp_test@EXEEXT@ wav_ulaw
./lossy_comp_test@EXEEXT@ wav_alaw
./lossy_comp_test@EXEEXT@ wav_gsm610
./lossy_comp_test@EXEEXT@ wav_g721
./peak_chunk_test@EXEEXT@ wav
./header_test@EXEEXT@ wav
./misc_test@EXEEXT@ wav
./string_test@EXEEXT@ wav
./multi_file_test@EXEEXT@ wav
echo "----------------------------------------------------------------------"
echo "  $sfversion passed tests on WAV files."
echo "----------------------------------------------------------------------"

# w64-tests
./write_read_test@EXEEXT@ w64
./lossy_comp_test@EXEEXT@ w64_ima
./lossy_comp_test@EXEEXT@ w64_msadpcm
./lossy_comp_test@EXEEXT@ w64_ulaw
./lossy_comp_test@EXEEXT@ w64_alaw
./lossy_comp_test@EXEEXT@ w64_gsm610
./header_test@EXEEXT@ w64
./misc_test@EXEEXT@ w64
echo "----------------------------------------------------------------------"
echo "  $sfversion passed tests on W64 files."
echo "----------------------------------------------------------------------"

# rf64-tests
./write_read_test@EXEEXT@ rf64
./header_test@EXEEXT@ rf64
./misc_test@EXEEXT@ rf64
echo "----------------------------------------------------------------------"
echo "  $sfversion passed tests on RF64 files."
echo "----------------------------------------------------------------------"

# raw-tests
./write_read_test@EXEEXT@ raw
./lossy_comp_test@EXEEXT@ raw_ulaw
./lossy_comp_test@EXEEXT@ raw_alaw
./lossy_comp_test@EXEEXT@ raw_gsm610
./lossy_comp_test@EXEEXT@ vox_adpcm
./raw_test@EXEEXT@
echo "----------------------------------------------------------------------"
echo "  $sfversion passed tests on RAW (header-less) files."
echo "----------------------------------------------------------------------"

# paf-tests
./write_read_test@EXEEXT@ paf
./header_test@EXEEXT@ paf
./misc_test@EXEEXT@ paf
echo "----------------------------------------------------------------------"
echo "  $sfversion passed tests on PAF files."
echo "----------------------------------------------------------------------"

# svx-tests
./write_read_test@EXEEXT@ svx
./header_test@EXEEXT@ svx
./misc_test@EXEEXT@ svx
echo "----------------------------------------------------------------------"
echo "  $sfversion passed tests on SVX files."
echo "----------------------------------------------------------------------"

# nist-tests
./write_read_test@EXEEXT@ nist
./lossy_comp_test@EXEEXT@ nist_ulaw
./lossy_comp_test@EXEEXT@ nist_alaw
./header_test@EXEEXT@ nist
./misc_test@EXEEXT@ nist
echo "----------------------------------------------------------------------"
echo "  $sfversion passed tests on NIST files."
echo "----------------------------------------------------------------------"

# ircam-tests
./write_read_test@EXEEXT@ ircam
./lossy_comp_test@EXEEXT@ ircam_ulaw
./lossy_comp_test@EXEEXT@ ircam_alaw
./header_test@EXEEXT@ ircam
./misc_test@EXEEXT@ ircam
echo "----------------------------------------------------------------------"
echo "  $sfversion passed tests on IRCAM files."
echo "----------------------------------------------------------------------"

# voc-tests
./write_read_test@EXEEXT@ voc
./lossy_comp_test@EXEEXT@ voc_ulaw
./lossy_comp_test@EXEEXT@ voc_alaw
./header_test@EXEEXT@ voc
./misc_test@EXEEXT@ voc
echo "----------------------------------------------------------------------"
echo "  $sfversion passed tests on VOC files."
echo "----------------------------------------------------------------------"

# mat4-tests
./write_read_test@EXEEXT@ mat4
./header_test@EXEEXT@ mat4
./misc_test@EXEEXT@ mat4
echo "----------------------------------------------------------------------"
echo "  $sfversion passed tests on MAT4 files."
echo "----------------------------------------------------------------------"

# mat5-tests
./write_read_test@EXEEXT@ mat5
./header_test@EXEEXT@ mat5
./misc_test@EXEEXT@ mat5
echo "----------------------------------------------------------------------"
echo "  $sfversion passed tests on MAT5 files."
echo "----------------------------------------------------------------------"

# pvf-tests
./write_read_test@EXEEXT@ pvf
./header_test@EXEEXT@ pvf
./misc_test@EXEEXT@ pvf
echo "----------------------------------------------------------------------"
echo "  $sfversion passed tests on PVF files."
echo "----------------------------------------------------------------------"

# xi-tests
./lossy_comp_test@EXEEXT@ xi_dpcm
echo "----------------------------------------------------------------------"
echo "  $sfversion passed tests on XI files."
echo "----------------------------------------------------------------------"

# htk-tests
./write_read_test@EXEEXT@ htk
./header_test@EXEEXT@ htk
./misc_test@EXEEXT@ htk
echo "----------------------------------------------------------------------"
echo "  $sfversion passed tests on HTK files."
echo "----------------------------------------------------------------------"

# avr-tests
./write_read_test@EXEEXT@ avr
./header_test@EXEEXT@ avr
./misc_test@EXEEXT@ avr
echo "----------------------------------------------------------------------"
echo "  $sfversion passed tests on AVR files."
echo "----------------------------------------------------------------------"

# sds-tests
./write_read_test@EXEEXT@ sds
./header_test@EXEEXT@ sds
./misc_test@EXEEXT@ sds
echo "----------------------------------------------------------------------"
echo "  $sfversion passed tests on SDS files."
echo "----------------------------------------------------------------------"

# sd2-tests
./write_read_test@EXEEXT@ sd2
echo "----------------------------------------------------------------------"
echo "  $sfversion passed tests on SD2 files."
echo "----------------------------------------------------------------------"

# wve-tests
./lossy_comp_test@EXEEXT@ wve
echo "----------------------------------------------------------------------"
echo "  $sfversion passed tests on WVE files."
echo "----------------------------------------------------------------------"

# mpc2k-tests
./write_read_test@EXEEXT@ mpc2k
./header_test@EXEEXT@ mpc2k
./misc_test@EXEEXT@ mpc2k
echo "----------------------------------------------------------------------"
echo "  $sfversion passed tests on MPC 2000 files."
echo "----------------------------------------------------------------------"

# flac-tests
./write_read_test@EXEEXT@ flac
./string_test@EXEEXT@ flac
echo "----------------------------------------------------------------------"
echo "  $sfversion passed tests on FLAC files."
echo "----------------------------------------------------------------------"

# vorbis-tests
./ogg_test@EXEEXT@
./vorbis_test@EXEEXT@
./lossy_comp_test@EXEEXT@ ogg_vorbis
./string_test@EXEEXT@ ogg
./misc_test@EXEEXT@ ogg
echo "----------------------------------------------------------------------"
echo "  $sfversion passed tests on OGG/VORBIS files."
echo "----------------------------------------------------------------------"

# io-tests
./stdio_test@EXEEXT@
./pipe_test@EXEEXT@
./virtual_io_test@EXEEXT@
echo "----------------------------------------------------------------------"
echo "  $sfversion passed stdio/pipe/vio tests."
echo "----------------------------------------------------------------------"


